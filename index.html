<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-diagnostic Manag√©rial | Meilleur Manager</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-violet: #6366f1;
            --primary-blue: #3b82f6;
            --dark-violet: #4f46e5;
            --light-violet: #8b5cf6;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            --dark-violet: #4f46e5;
            --light-violet: #8b5cf6;
            --primary-text: #1e293b;
            --secondary-text: #64748b;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #ffffff;
            color: var(--primary-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
        }

        .header {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 50px 40px;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header p {
            font-size: 1.15em;
            opacity: 0.9;
            font-weight: 300;
            max-width: 800px;
        }

        .header-buttons {
            margin-top: 25px;
        }

        .header-buttons a {
            display: inline-block;
            padding: 12px 30px;
            background: transparent;
            border: 2px solid white;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        .header-buttons a:hover {
            background: white;
            color: var(--primary-violet);
        }

        .progress-container {
            background: var(--light-bg);
            padding: 20px 40px;
            border-bottom: 1px solid var(--border-color);
        }

        .progress-bar {
            background: #e2e8f0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--primary-blue);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 0.9em;
            color: var(--secondary-text);
            text-align: center;
        }

        .tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: var(--secondary-text);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-size: 0.95em;
        }

        .tab:hover {
            background: var(--light-bg);
            color: var(--primary-text);
        }

        .tab.active {
            color: var(--primary-violet);
            border-bottom-color: var(--primary-violet);
        }

        .tab-content {
            display: none;
            padding: 50px 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .tab-content.active {
            display: block;
        }

        .intro-section {
            background: var(--light-bg);
            padding: 40px;
            border-left: 4px solid var(--primary-violet);
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .intro-section h2 {
            color: var(--primary-violet);
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 700;
        }

        .intro-section p {
            color: var(--primary-text);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .intro-section ul {
            list-style: none;
            padding-left: 0;
        }

        .intro-section ul li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            color: var(--primary-text);
        }

        .intro-section ul li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--primary-violet);
            font-weight: bold;
        }

        .bareme-section {
            margin: 50px 0;
        }

        .bareme-section h2 {
            color: var(--primary-violet);
            margin-bottom: 30px;
            font-size: 1.8em;
            font-weight: 700;
        }

        .bareme-card {
            background: white;
            border: 2px solid var(--border-color);
            border-left: 4px solid;
            padding: 25px 30px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .bareme-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .bareme-card.low {
            border-left-color: var(--danger-color);
        }

        .bareme-card.medium {
            border-left-color: var(--warning-color);
        }

        .bareme-card.high {
            border-left-color: var(--success-color);
        }

        .bareme-card h3 {
            color: var(--primary-violet);
            margin-bottom: 12px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .bareme-card p {
            color: var(--secondary-text);
            line-height: 1.7;
        }

        .advice-box {
            background: #eff6ff;
            border-left: 4px solid var(--primary-blue);
            padding: 30px;
            margin-top: 40px;
        }

        .advice-box h3 {
            color: var(--primary-violet);
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .advice-box ul li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .advice-box ul li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--warning-color);
            font-weight: bold;
            font-size: 1.2em;
        }

        .category-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            margin: 50px 0 30px;
            font-size: 1.3em;
            font-weight: 700;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .question-card {
            background: white;
            border: 2px solid var(--border-color);
            padding: 30px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .question-card:hover {
            border-color: var(--primary-violet);
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
        }

        .question-header {
            display: flex;
            align-items: start;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            min-width: 45px;
            height: 45px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 20px;
            flex-shrink: 0;
            font-size: 1.1em;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
        }

        .question-text {
            flex: 1;
            color: var(--primary-text);
            line-height: 1.7;
            font-size: 1.05em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .option:hover {
            border-color: var(--primary-violet);
            background: var(--light-bg);
        }

        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: var(--primary-violet);
        }

        .option label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95em;
            color: var(--primary-text);
        }

        .option label strong {
            color: var(--primary-violet);
            font-weight: 600;
        }

        .option.selected {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-color: var(--primary-violet);
            border-width: 2px;
        }

        .global-score {
            text-align: center;
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 50px 40px;
            margin-bottom: 50px;
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.3);
        }

        .global-score h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: 600;
            opacity: 0.9;
        }

        .global-score .score {
            font-size: 5em;
            font-weight: 700;
            letter-spacing: -2px;
        }

        .global-score .percentage {
            font-size: 1.5em;
            margin-top: 15px;
            opacity: 0.9;
        }

        .theme-section {
            margin-bottom: 60px;
        }

        .theme-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 30px;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
        }

        .result-card {
            background: white;
            border: 2px solid var(--border-color);
            border-left: 4px solid;
            padding: 30px;
            transition: all 0.3s;
        }

        .result-card:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }

        .result-card h3 {
            color: var(--primary-violet);
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .score-display {
            font-size: 3em;
            font-weight: 700;
            color: var(--primary-violet);
            line-height: 1;
        }

        .score-detail {
            color: var(--secondary-text);
            margin: 15px 0;
            font-size: 0.95em;
        }

        .priority-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 15px;
        }

        .result-card.priority-critical {
            border-left-color: var(--danger-color);
        }

        .result-card.priority-critical .priority-badge {
            background: var(--danger-color);
            color: white;
        }

        .result-card.priority-high {
            border-left-color: var(--primary-violet);
        }

        .result-card.priority-high .priority-badge {
            background: var(--primary-blue);
            color: white;
        }

        .result-card.priority-medium {
            border-left-color: var(--warning-color);
        }

        .result-card.priority-medium .priority-badge {
            background: var(--warning-color);
            color: var(--primary-violet);
        }

        .result-card.priority-low {
            border-left-color: var(--success-color);
        }

        .result-card.priority-low .priority-badge {
            background: var(--success-color);
            color: white;
        }

        .formation-description {
            background: var(--light-bg);
            padding: 20px;
            margin-top: 20px;
            font-size: 0.9em;
            color: var(--secondary-text);
            line-height: 1.7;
            border-left: 3px solid var(--border-color);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            padding: 30px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 40px;
            border: none;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #2563eb 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-violet);
            border: 2px solid var(--primary-violet);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-content {
                padding: 30px 20px;
            }
            
            .category-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            margin: 50px 0 30px;
            font-size: 1.3em;
            font-weight: 700;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

            .question-card {
                padding: 20px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Auto-diagnostic Manag√©rial</h1>
            <p>√âvaluez vos pratiques sur 34 dimensions cl√©s et identifiez vos axes de progression prioritaires</p>
            </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">0 / 34 questions r√©pondues</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('intro')">Introduction</div>
            <div class="tab" onclick="showTab('questionnaire')">Questionnaire</div>
            <div class="tab" onclick="showTab('results')">R√©sultats</div>
        </div>

        <!-- ONGLET INTRODUCTION -->
        <div id="intro" class="tab-content active">
            <div class="intro-section">
                <h2>Pourquoi ce diagnostic ?</h2>
                <p>
                    Vous g√©rez probablement plus d'urgences que de priorit√©s. Vous courez apr√®s le temps, 
                    vos collaborateurs n'avancent pas sans vous. Ce questionnaire identifie pr√©cis√©ment 
                    o√π vous en √™tes et ce qui doit changer.
                </p>
                <p style="margin-top: 20px;">
                    <strong>34 questions. 8 th√©matiques. Un diagnostic factuel de vos pratiques manag√©riales.</strong>
                </p>
            </div>

            <div class="intro-section">
                <h2>Comment √ßa marche ?</h2>
                <ul>
                    <li>R√©pondez honn√™tement aux 34 questions (15-20 minutes)</li>
                    <li>Obtenez vos scores par comp√©tence manag√©riale</li>
                    <li>Identifiez vos priorit√©s de d√©veloppement</li>
                    <li>T√©l√©chargez votre diagnostic complet</li>
                </ul>
            </div>

            <div class="bareme-section">
                <h2>Bar√®me de notation</h2>
                
                <div class="bareme-card low">
                    <h3>Jamais ou pas du tout (0 point)</h3>
                    <p>Je ne fais jamais ou pas du tout cette pratique.</p>
                </div>

                <div class="bareme-card medium">
                    <h3>Rarement ou partiellement (2 points)</h3>
                    <p>J'essaie de faire cette pratique, mais ce n'est pas r√©gulier ou cela n'est pas complet.</p>
                </div>

                <div class="bareme-card high">
                    <h3>Souvent ou syst√©matiquement (5 points)</h3>
                    <p>Cette pratique fait partie int√©grante et r√©guli√®re de ma gestion quotidienne.</p>
                </div>
            </div>

            <div class="advice-box">
                <h3>Conseils pour r√©pondre</h3>
                <ul>
                    <li>Soyez honn√™te avec vous-m√™me</li>
                    <li>√âvaluez le manager que vous √™tes aujourd'hui, pas celui que vous aimeriez √™tre</li>
                    <li>Ne r√©pondez pas quelque chose que vous ne sauriez pas prouver</li>
                    <li>Il n'y a aucun jugement, juste un diagnostic factuel</li>
                </ul>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="showTab('questionnaire')">
                    Commencer le diagnostic
                </button>
            </div>
        </div>

        <!-- ONGLET QUESTIONNAIRE -->
        <div id="questionnaire" class="tab-content">
            <div id="questionsContainer"></div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showTab('intro')">‚Üê Retour</button>
                <button class="btn btn-primary" onclick="calculateResults()">Voir mes r√©sultats</button>
            </div>
        </div>

        <!-- ONGLET R√âSULTATS -->
        <div id="results" class="tab-content">
            <div class="global-score" id="globalScore"></div>
            <div id="resultsContainer"></div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showTab('questionnaire')">‚Üê Modifier mes r√©ponses</button>
                <button class="btn btn-primary" onclick="exportResults()">T√©l√©charger le diagnostic</button>
                <a href="URL_DE_TA_PAGE_AUTO_DIAGNOSTIC" target="_parent" class="btn btn-secondary">‚Üê Retour</a>
            </div>
        </div>
    </div>

    <script>
        // Donn√©es du questionnaire
        const bareme = [
            { label: "Jamais ou pas du tout", points: 0 },
            { label: "Rarement ou partiellement", points: 2 },
            { label: "Souvent ou syst√©matiquement", points: 5 }
        ];

        const questions = [
            { num: "Q1", category: "Organisation Personnelle & Efficience", text: "Je r√©serve du temps r√©gulier (sans interruption) pour planifier, r√©fl√©chir, ou am√©liorer les m√©thodes de travail de l'√©quipe.", formations: ["Manager Efficace", "Organisation Efficace"] },
            { num: "Q2", category: "Organisation Personnelle & Efficience", text: "J'identifie et j'√©limine r√©guli√®rement les t√¢ches ou les contr√¥les qui n'apportent plus de valeur ajout√©e essentielle (principe Lean).", formations: ["Manager Efficace", "Organisation Efficace", "R√©solution Efficace"] },
            { num: "Q3", category: "Organisation Personnelle & Efficience", text: "J'ai une capacit√© suffisante pour g√©rer les impr√©vus et je me sens rarement d√©bord√©(e) par les demandes urgentes de mes collaborateurs ou de mon manager.", formations: ["Manager Efficace", "Organisation Efficace"] },
            { num: "Q4", category: "Organisation Personnelle & Efficience", text: "Ma mission (ou celle de mon √©quipe) est formul√©e en une phrase simple expliquant clairement sa raison d'√™tre dans l'entreprise.", formations: ["Progression Efficace", "Organisation Efficace"] },
            { num: "Q5", category: "Organisation Personnelle & Efficience", text: "Je v√©rifie mes indicateurs de performance cl√©s (chiffres ou r√©alisations) avec une fr√©quence √©lev√©e (au moins une fois par semaine).", formations: ["Progression Efficace", "Pilotage Efficace"] },
            { num: "Q6", category: "Objectifs et priorisation", text: "Je d√©finis un maximum de 5 objectifs clairs et mesurables pour mon √©quipe sur une p√©riode limit√©e (environ 90 jours).", formations: ["Progression Efficace", "Pilotage Efficace", "Ex√©cution Efficace"] },
            { num: "Q7", category: "Objectifs et priorisation", text: "Je m'assure que chaque objectif fix√© pour l'√©quipe est associ√© √† un syst√®me de mesure (un chiffre ou une r√©alisation concr√®te).", formations: ["Progression Efficace", "Pilotage Efficace", "Ex√©cution Efficace"] },
            { num: "Q8", category: "Objectifs et priorisation", text: "Je fais une revue hebdomadaire des actions de l'√©quipe pour m'assurer que chacun sait \"Qui fait Quoi pour Quand\" et pour garantir l'alignement.", formations: ["Pilotage Efficace", "Ex√©cution Efficace", "CDP Efficace"] },
            { num: "Q9", category: "Objectifs et priorisation", text: "Si nous rencontrons des obstacles, je change le plan d'action (le \"comment\") pour 30 jours, mais je maintiens l'objectif initial (le \"quoi\").", formations: ["Pilotage Efficace", "Ex√©cution Efficace"] },
            { num: "Q10", category: "R√©solution de Probl√®mes & Am√©lioration Continue", text: "Face √† un probl√®me r√©current, je m√®ne une enqu√™te structur√©e pour identifier la cause racine (par exemple, en me posant la question 'pourquoi' plusieurs fois).", formations: ["D√©cision Efficace", "R√©solution Efficace"] },
            { num: "Q11", category: "R√©solution de Probl√®mes & Am√©lioration Continue", text: "J'anime la r√©solution de probl√®mes en utilisant des supports visuels (dessins, graphiques) et des donn√©es chiffr√©es plut√¥t que des impressions (\"souvent\", \"trop\").", formations: ["R√©solution Efficace"] },
            { num: "Q12", category: "R√©solution de Probl√®mes & Am√©lioration Continue", text: "Quand un collaborateur me pr√©sente un probl√®me, mon r√©flexe est de lui demander de proposer d'abord une solution ou une piste d'action.", formations: ["D√©cision Efficace", "CDP Efficace"] },
            { num: "Q13", category: "R√©solution de Probl√®mes & Am√©lioration Continue", text: "Pour prendre une d√©cision importante et complexe, je consulte mes collaborateurs individuellement et par √©crit pour recueillir leurs analyses sans les influencer.", formations: ["D√©cision Efficace"] },
            { num: "Q14", category: "R√©solution de Probl√®mes & Am√©lioration Continue", text: "Je suis √† l'aise avec l'id√©e d'abandonner rapidement un plan d'action ou un projet qui ne donne pas de r√©sultats ou qui s'enlise, m√™me si j'y ai mis de l'√©nergie.", formations: ["D√©cision Efficace", "R√©solution Efficace"] },
            { num: "Q15", category: "Relation Collaborateur & Communication", text: "J'organise des rencontres individuelles r√©guli√®res (au moins une fois toutes les deux semaines) avec chaque membre de mon √©quipe.", formations: ["Manager Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q16", category: "Relation Collaborateur & Communication", text: "Au d√©but de ces √©changes individuels, je laisse la personne parler en premier de ses sujets, sans l'interrompre ni orienter.", formations: ["Manager Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q17", category: "Relation Collaborateur & Communication", text: "J'adapte mon style de communication, mon approche et ma reconnaissance (en public ou en priv√©) en fonction de chaque personne.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q18", category: "Relation Collaborateur & Communication", text: "Je suis vigilant(e) aux signaux qui indiquent un conflit potentiel (tension relationnelle, difficult√© de communication, baisse d'engagement) et j'agis tr√®s t√¥t.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q19", category: "Relation Collaborateur & Communication", text: "Lors d'un projet, je suis attentif √† mettre en avant les personnes dont les forces sont les plus adapt√©es, plut√¥t que d'attribuer la t√¢che √† la personne disponible.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q20", category: "Performance, Feedback & Culture", text: "Je donne imm√©diatement ou tr√®s rapidement un retour d'information pr√©cis et factuel √† mes collaborateurs lorsqu'ils ont bien ou mal agi.", formations: ["Manager Efficace", "Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q21", category: "Performance, Feedback & Culture", text: "Je note activement les comportements de mes collaborateurs qui renforcent ou nuisent √† la coh√©sion et aux r√©sultats (bonnes ou mauvaises pratiques observables).", formations: ["Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q22", category: "Performance, Feedback & Culture", text: "Lors de l'√©valuation, je juge mes collaborateurs sur leurs R√©sultats ET sur leurs Comportements (R√©trospective + Contribution Culturelle).", formations: ["Manager Efficace", "Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q23", category: "Performance, Feedback & Culture", text: "Je m'assure que mon √©valuation et celle de mon collaborateur sont align√©es; si un √©cart existe, nous en discutons clairement en entretien.", formations: ["Manager Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q24", category: "Performance, Feedback & Culture", text: "Je suis convaincu(e) qu'il est impossible de trop communiquer de mani√®re honn√™te et ouverte sur la performance et les comportements dans mon √©quipe.", formations: ["Manager Efficace", "Culture Efficace"] },
            { num: "Q25", category: "D√©l√©gation, Autonomie & Coaching", text: "Je d√©l√®gue des t√¢ches complexes ou risqu√©es et je laisse l'autonomie totale √† mon collaborateur sur le \"comment\" accomplir la mission.", formations: ["Manager Efficace"] },
            { num: "Q26", category: "D√©l√©gation, Autonomie & Coaching", text: "Je ne me laisse pas rendre du travail (\"d√©l√©gation invers√©e\") par mes collaborateurs qui me demandent de r√©soudre leurs probl√®mes.", formations: ["Manager Efficace"] },
            { num: "Q27", category: "D√©l√©gation, Autonomie & Coaching", text: "Je m'appuie sur les forces et les r√©ussites pass√©es de mes collaborateurs pour fixer leurs objectifs et orienter mes feedbacks.", formations: ["Manager Efficace", "Entretien Efficace"] },
            { num: "Q28", category: "D√©l√©gation, Autonomie & Coaching", text: "Quand un collaborateur a besoin de se d√©velopper, je lui propose des ressources (formation, mentor, lecture) ou je lui donne des opportunit√©s pour apprendre.", formations: ["Manager Efficace", "Entretien Efficace"] },
            { num: "Q29", category: "D√©l√©gation, Autonomie & Coaching", text: "Je suis vigilant(e) √† ce que les d√©fis que je fixe √† mes collaborateurs correspondent √† leurs comp√©tences actuelles + 10%, pour √©viter la routine ou l'√©chec.", formations: ["Entretien Efficace"] },
            { num: "Q30", category: "Acquisition & Gestion des Talents", text: "Avant de recruter pour un poste vacant ou nouveau, j'examine syst√©matiquement si les missions peuvent √™tre redistribu√©es dans l'√©quipe.", formations: ["Recrutement Efficace"] },
            { num: "Q31", category: "Acquisition & Gestion des Talents", text: "Je r√©dige la description de poste id√©ale en listant les comportements observables et les attitudes n√©cessaires (pas seulement les comp√©tences techniques).", formations: ["Culture Efficace", "Recrutement Efficace"] },
            { num: "Q32", category: "Acquisition & Gestion des Talents", text: "Lors des entretiens, je pose principalement des questions qui demandent au candidat de raconter une situation concr√®te et pass√©e (questions comportementales).", formations: ["Recrutement Efficace"] },
            { num: "Q33", category: "Acquisition & Gestion des Talents", text: "Je suis en permanence √† la recherche de raisons factuelles de ne pas recruter un candidat, m√™me si je l'appr√©cie personnellement.", formations: ["Recrutement Efficace"] },
            { num: "Q34", category: "Acquisition & Gestion des Talents", text: "Je fais participer plusieurs membres de mon √©quipe √† la phase d'entretien pour obtenir une √©valuation multicrit√®res et √©viter mes biais personnels.", formations: ["Manager Efficace", "Recrutement Efficace"] }
        ];

        const formations = {
            "Manager Efficace": {
                description: "Le 1-√†-1 hebdomadaire, le feedback, la d√©l√©gation et le coaching. Les quatre outils fondamentaux pour construire une relation de confiance et d√©velopper l'autonomie.",
                theme: "CR√âER UN SYST√àME"
            },
            "Progression Efficace": {
                description: "D√©finir des objectifs clairs et mesurables, suivre la progression de l'√©quipe et ajuster les plans d'action pour garantir l'atteinte des r√©sultats.",
                theme: "S'ORGANISER"
            },
            "Organisation Efficace": {
                description: "R√©cup√©rer du temps strat√©gique, √©liminer les t√¢ches sans valeur ajout√©e et g√©rer efficacement les impr√©vus sans √™tre d√©bord√©.",
                theme: "S'ORGANISER"
            },
            "Pilotage Efficace": {
                description: "Un syst√®me de gestion par objectifs sur 90 jours avec des r√©unions Strat√©giques, Tactiques et de Terrain. Flexible sur le comment, strict sur le quoi.",
                theme: "CR√âER UN SYST√àME"
            },
            "D√©cision Efficace": {
                description: "Prendre des d√©cisions √©clair√©es en consultant vos collaborateurs, analyser les probl√®mes en profondeur et savoir abandonner ce qui ne fonctionne pas.",
                theme: "EXECUTER"
            },
            "R√©solution Efficace": {
                description: "Identifier les causes racines des probl√®mes, utiliser des approches structur√©es et des donn√©es pour r√©soudre efficacement les difficult√©s r√©currentes.",
                theme: "EXECUTER"
            },
            "Ex√©cution Efficace": {
                description: "Transformer les objectifs en actions concr√®tes, assurer le suivi r√©gulier et garantir que chacun sait \"Qui fait Quoi pour Quand\".",
                theme: "EXECUTER"
            },
            "CDP Efficace": {
                description: "Chef de projet efficace : adapter votre communication, d√©tecter les tensions, mobiliser les forces de chacun sur les projets.",
                theme: "CR√âER UN SYST√àME"
            },
            "Communication Efficace": {
                description: "√âtablir des relations de qualit√© avec vos collaborateurs, adapter votre style de communication et cr√©er un climat de confiance.",
                theme: "COMMUNIQUER"
            },
            "Charisme Efficace": {
                description: "D√©velopper votre influence et votre leadership, inspirer vos √©quipes et renforcer votre pouvoir relationnel.",
                theme: "COMMUNIQUER"
            },
            "Culture Efficace": {
                description: "D√©finir et promouvoir les comportements attendus, √©valuer la contribution culturelle de chacun et construire une culture d'√©quipe forte.",
                theme: "CR√âER UN SYST√àME"
            },
            "Entretien Efficace": {
                description: "Transformer l'√©valuation annuelle en outil de coaching, √©viter les biais, structurer vos √©valuations bas√©es sur les objectifs et les comportements.",
                theme: "EXECUTER"
            },
            "Recrutement Efficace": {
                description: "Recruter les bons talents en d√©finissant les comportements recherch√©s, poser les bonnes questions en entretien et √©viter les biais de recrutement.",
                theme: "EXECUTER"
            }
        };

        let responses = {};

        // Initialisation
        function init() {
            renderQuestions();
            updateProgress();
        }

        // Afficher les questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            let currentCategory = null;
            let html = '';

            questions.forEach((q, index) => {
                if (q.category !== currentCategory) {
                    currentCategory = q.category;
                    html += `<div class="category-title">${currentCategory}</div>`;
                }

                html += `
                    <div class="question-card">
                        <div class="question-header">
                            <div class="question-number">${q.num.replace('Q', '')}</div>
                            <div class="question-text">${q.text}</div>
                        </div>
                        <div class="options">
                            ${bareme.map((option, optIndex) => `
                                <div class="option" id="option-${index}-${optIndex}" onclick="selectOption('${q.num}', ${option.points}, ${index}, ${optIndex})">
                                    <input type="radio" name="${q.num}" id="${q.num}-${optIndex}" value="${option.points}">
                                    <label for="${q.num}-${optIndex}">
                                        <strong>${option.label}</strong>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // S√©lectionner une option
        function selectOption(questionNum, points, questionIndex, optionIndex) {
            responses[questionNum] = points;
            
            // Mettre √† jour l'interface
            document.querySelectorAll(`.option[id^="option-${questionIndex}-"]`).forEach(opt => {
                opt.classList.remove('selected');
            });
            document.getElementById(`option-${questionIndex}-${optionIndex}`).classList.add('selected');
            document.getElementById(`${questionNum}-${optionIndex}`).checked = true;
            
            updateProgress();
        }

        // Mettre √† jour la barre de progression
        function updateProgress() {
            const answered = Object.keys(responses).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${answered} / ${total} questions r√©pondues`;
        }

        // Calculer les r√©sultats
        function calculateResults() {
            const answered = Object.keys(responses).length;
            if (answered < questions.length) {
                alert(`Veuillez r√©pondre √† toutes les questions (${answered}/${questions.length} r√©pondues)`);
                return;
            }

            // Calculer le score par formation
            const formationScores = {};
            const formationMaxScores = {};

            // Initialiser les compteurs
            Object.keys(formations).forEach(formation => {
                formationScores[formation] = 0;
                formationMaxScores[formation] = 0;
            });

            // Parcourir les questions et calculer les scores
            questions.forEach(q => {
                const score = responses[q.num] || 0;
                q.formations.forEach(formation => {
                    formationScores[formation] += score;
                    formationMaxScores[formation] += 5;
                });
            });

            // Calculer les pourcentages et priorit√©s
            const results = [];
            Object.keys(formations).forEach(formation => {
                const score = formationScores[formation];
                const maxScore = formationMaxScores[formation];
                const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
                
                let priority, priorityClass;
                if (percentage < 25) {
                    priority = "Critique";
                    priorityClass = "critical";
                } else if (percentage < 60) {
                    priority = "Elev√©e";
                    priorityClass = "high";
                } else if (percentage < 90) {
                    priority = "Am√©lioration possible";
                    priorityClass = "medium";
                } else {
                    priority = "Comp√©tence √©tablie";
                    priorityClass = "low";
                }

                results.push({
                    formation,
                    score,
                    maxScore,
                    percentage: percentage.toFixed(1),
                    priority,
                    priorityClass,
                    theme: formations[formation].theme,
                    description: formations[formation].description
                });
            });

            // Trier par priorit√©
            results.sort((a, b) => {
                const priorityOrder = { "Critique": 0, "Elev√©e": 1, "Am√©lioration possible": 2, "Comp√©tence √©tablie": 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });

            displayResults(results);
            showTab('results');
        }

        // Afficher les r√©sultats
        function displayResults(results) {
            const totalScore = Object.values(responses).reduce((a, b) => a + b, 0);
            const maxTotalScore = questions.length * 5;
            const globalPercentage = ((totalScore / maxTotalScore) * 100).toFixed(1);

            document.getElementById('globalScore').innerHTML = `
                <h2>Votre Score Global</h2>
                <div class="score">${totalScore}<span style="font-size: 0.5em; opacity: 0.7;"> / ${maxTotalScore}</span></div>
                <div class="percentage">${globalPercentage}% de ma√Ætrise</div>
            `;

            // Grouper par th√®me
            const byTheme = {};
            results.forEach(r => {
                if (!byTheme[r.theme]) byTheme[r.theme] = [];
                byTheme[r.theme].push(r);
            });

            let html = '';
            Object.keys(byTheme).forEach(theme => {
                html += `
                    <div class="theme-section">
                        <div class="theme-title">${theme}</div>
                        <div class="results-grid">
                            ${byTheme[theme].map(r => `
                                <div class="result-card priority-${r.priorityClass}">
                                    <h3>${r.formation}</h3>
                                    <div class="score-display">${r.percentage}%</div>
                                    <div class="score-detail">${r.score} / ${r.maxScore} points</div>
                                    <div class="priority-badge">${r.priority}</div>
                                    <div class="formation-description">${r.description}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            document.getElementById('resultsContainer').innerHTML = html;
        }

        // Changer d'onglet
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="showTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');

            // Scroll to top - multiple m√©thodes pour assurer la compatibilit√©
            window.scrollTo({ top: 0, behavior: 'smooth' });
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
            
            // Alternative : scroll vers le header
            document.querySelector('.header').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Exporter les r√©sultats
                function exportResults() {
            const totalScore = Object.values(responses).reduce((a, b) => a + b, 0);
            const maxTotalScore = questions.length * 5;
            const globalPercentage = ((totalScore / maxTotalScore) * 100).toFixed(1);

            let text = `AUTO-DIAGNOSTIC MANAG√âRIAL - MEILLEUR MANAGER
`;
            text += `${'='.repeat(50)}

`;
            text += `Score Global: ${totalScore}/${maxTotalScore} (${globalPercentage}%)

`;

            // Calculer les scores par formation
            const formationScores = {};
            const formationMaxScores = {};
            Object.keys(formations).forEach(formation => {
                formationScores[formation] = 0;
                formationMaxScores[formation] = 0;
            });

            questions.forEach(q => {
                const score = responses[q.num] || 0;
                q.formations.forEach(formation => {
                    formationScores[formation] += score;
                    formationMaxScores[formation] += 5;
                });
            });

            const results = [];
            Object.keys(formations).forEach(formation => {
                const score = formationScores[formation];
                const maxScore = formationMaxScores[formation];
                const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
                
                let priority;
                if (percentage < 25) priority = "Critique";
                else if (percentage < 60) priority = "Elev√©e";
                else if (percentage < 90) priority = "Am√©lioration possible";
                else priority = "Comp√©tence √©tablie";

                results.push({ formation, score, maxScore, percentage: percentage.toFixed(1), priority, theme: formations[formation].theme });
            });

            results.sort((a, b) => {
                const priorityOrder = { "Critique": 0, "Elev√©e": 1, "Am√©lioration possible": 2, "Comp√©tence √©tablie": 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });

            // Grouper par th√®me
            const byTheme = {};
            results.forEach(r => {
                if (!byTheme[r.theme]) byTheme[r.theme] = [];
                byTheme[r.theme].push(r);
            });

            Object.keys(byTheme).forEach(theme => {
                text += `
${theme}
${'-'.repeat(theme.length)}
`;
                byTheme[theme].forEach(r => {
                    text += `
${r.formation}
`;
                    text += `  Score: ${r.score}/${r.maxScore} (${r.percentage}%)
`;
                    text += `  Priorit√©: ${r.priority}
`;
                });
            });

            text += `

D√©tail des r√©ponses
${'-'.repeat(20)}
`;
            questions.forEach(q => {
                const score = responses[q.num] || 0;
                const label = bareme.find(b => b.points === score)?.label || 'Non r√©pondu';
                text += `
${q.num}: ${label} (${score} points)
`;
            });

            // D√©tection iOS/Safari
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

            if (isIOS || isSafari) {
                // M√©thode 1 pour iOS : Ouvrir dans un nouvel onglet
                const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                
                // Ouvrir dans un nouvel onglet pour iOS
                const newWindow = window.open(url, '_blank');
                
                if (newWindow) {
                    // Afficher un message √† l'utilisateur
                    setTimeout(() => {
                        alert('üì± Sur iPad/iPhone :

1. Le diagnostic s\'est ouvert dans un nouvel onglet
2. Appuyez longuement sur le texte
3. S√©lectionnez "Tout s√©lectionner"
4. Copiez et collez dans Notes ou Mail

Ou appuyez sur le bouton Partager pour l\'envoyer par email.');
                        URL.revokeObjectURL(url);
                    }, 500);
                } else {
                    // Fallback : copier dans le presse-papier
                    copyToClipboard(text);
                }
            } else {
                // M√©thode standard pour les autres navigateurs
                const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'diagnostic_managerial_meilleurmanager.txt';
                document.body.appendChild(a);
                a.click();
                
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
            }
        }

        // Fonction pour copier dans le presse-papier (fallback)
        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                alert('‚úÖ Diagnostic copi√© dans le presse-papier !

Vous pouvez le coller dans Notes, Mail ou tout autre application.');
            } catch (err) {
                alert('‚ùå Impossible de sauvegarder automatiquement.

Veuillez faire une capture d\'√©cran de vos r√©sultats.');
            }
            
            document.body.removeChild(textArea);
        }

        
        // Initialiser au chargement
        window.onload = init;
    </script>
</body>
</html>
