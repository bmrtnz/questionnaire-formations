<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-diagnostic Managérial | Meilleur Manager</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-violet: #6366f1;
            --primary-blue: #3b82f6;
            --dark-violet: #4f46e5;
            --light-violet: #8b5cf6;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            --dark-violet: #4f46e5;
            --light-violet: #8b5cf6;
            --primary-text: #1e293b;
            --secondary-text: #64748b;
            --accent-gradient: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #ffffff;
            color: var(--primary-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
        }

        .header {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 50px 40px;
            box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header p {
            font-size: 1.15em;
            opacity: 0.9;
            font-weight: 300;
            max-width: 800px;
        }

        .header-buttons {
            margin-top: 25px;
        }

        .header-buttons a {
            display: inline-block;
            padding: 12px 30px;
            background: transparent;
            border: 2px solid white;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        .header-buttons a:hover {
            background: white;
            color: var(--primary-violet);
        }

        .progress-container {
            background: var(--light-bg);
            padding: 20px 40px;
            border-bottom: 1px solid var(--border-color);
        }

        .progress-bar {
            background: #e2e8f0;
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--primary-blue);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 0.9em;
            color: var(--secondary-text);
            text-align: center;
        }

        .tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: var(--secondary-text);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            font-size: 0.95em;
        }

        .tab:hover {
            background: var(--light-bg);
            color: var(--primary-text);
        }

        .tab.active {
            color: var(--primary-violet);
            border-bottom-color: var(--primary-violet);
        }

        .tab-content {
            display: none;
            padding: 50px 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .tab-content.active {
            display: block;
        }

        .intro-section {
            background: var(--light-bg);
            padding: 40px;
            border-left: 4px solid var(--primary-violet);
            margin-bottom: 40px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .intro-section h2 {
            color: var(--primary-violet);
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 700;
        }

        .intro-section p {
            color: var(--primary-text);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .intro-section ul {
            list-style: none;
            padding-left: 0;
        }

        .intro-section ul li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            color: var(--primary-text);
        }

        .intro-section ul li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: var(--primary-violet);
            font-weight: bold;
        }

        .bareme-section {
            margin: 50px 0;
        }

        .bareme-section h2 {
            color: var(--primary-violet);
            margin-bottom: 30px;
            font-size: 1.8em;
            font-weight: 700;
        }

        .bareme-card {
            background: white;
            border: 2px solid var(--border-color);
            border-left: 4px solid;
            padding: 25px 30px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .bareme-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .bareme-card.low {
            border-left-color: var(--danger-color);
        }

        .bareme-card.medium {
            border-left-color: var(--warning-color);
        }

        .bareme-card.high {
            border-left-color: var(--success-color);
        }

        .bareme-card h3 {
            color: var(--primary-violet);
            margin-bottom: 12px;
            font-size: 1.2em;
            font-weight: 600;
        }

        .bareme-card p {
            color: var(--secondary-text);
            line-height: 1.7;
        }

        .advice-box {
            background: #eff6ff;
            border-left: 4px solid var(--primary-blue);
            padding: 30px;
            margin-top: 40px;
        }

        .advice-box h3 {
            color: var(--primary-violet);
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .advice-box ul li {
            padding: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .advice-box ul li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--warning-color);
            font-weight: bold;
            font-size: 1.2em;
        }

        .category-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            margin: 50px 0 30px;
            font-size: 1.3em;
            font-weight: 700;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .question-card {
            background: white;
            border: 2px solid var(--border-color);
            padding: 30px;
            margin-bottom: 25px;
            transition: all 0.3s;
        }

        .question-card:hover {
            border-color: var(--primary-violet);
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
        }

        .question-header {
            display: flex;
            align-items: start;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            min-width: 45px;
            height: 45px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 20px;
            flex-shrink: 0;
            font-size: 1.1em;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
        }

        .question-text {
            flex: 1;
            color: var(--primary-text);
            line-height: 1.7;
            font-size: 1.05em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .option:hover {
            border-color: var(--primary-violet);
            background: var(--light-bg);
        }

        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: var(--primary-violet);
        }

        .option label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95em;
            color: var(--primary-text);
        }

        .option label strong {
            color: var(--primary-violet);
            font-weight: 600;
        }

        .option.selected {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
            border-color: var(--primary-violet);
            border-width: 2px;
        }

        .global-score {
            text-align: center;
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 50px 40px;
            margin-bottom: 50px;
            box-shadow: 0 8px 32px rgba(99, 102, 241, 0.3);
        }

        .global-score h2 {
            font-size: 1.5em;
            margin-bottom: 20px;
            font-weight: 600;
            opacity: 0.9;
        }

        .global-score .score {
            font-size: 5em;
            font-weight: 700;
            letter-spacing: -2px;
        }

        .global-score .percentage {
            font-size: 1.5em;
            margin-top: 15px;
            opacity: 0.9;
        }

        .theme-section {
            margin-bottom: 60px;
        }

        .theme-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 30px;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
        }

        .result-card {
            background: white;
            border: 2px solid var(--border-color);
            border-left: 4px solid;
            padding: 30px;
            transition: all 0.3s;
        }

        .result-card:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }

        .result-card h3 {
            color: var(--primary-violet);
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .score-display {
            font-size: 3em;
            font-weight: 700;
            color: var(--primary-violet);
            line-height: 1;
        }

        .score-detail {
            color: var(--secondary-text);
            margin: 15px 0;
            font-size: 0.95em;
        }

        .priority-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 15px;
        }

        .result-card.priority-critical {
            border-left-color: var(--danger-color);
        }

        .result-card.priority-critical .priority-badge {
            background: var(--danger-color);
            color: white;
        }

        .result-card.priority-high {
            border-left-color: var(--primary-violet);
        }

        .result-card.priority-high .priority-badge {
            background: var(--primary-blue);
            color: white;
        }

        .result-card.priority-medium {
            border-left-color: var(--warning-color);
        }

        .result-card.priority-medium .priority-badge {
            background: var(--warning-color);
            color: var(--primary-violet);
        }

        .result-card.priority-low {
            border-left-color: var(--success-color);
        }

        .result-card.priority-low .priority-badge {
            background: var(--success-color);
            color: white;
        }

        .formation-description {
            background: var(--light-bg);
            padding: 20px;
            margin-top: 20px;
            font-size: 0.9em;
            color: var(--secondary-text);
            line-height: 1.7;
            border-left: 3px solid var(--border-color);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            padding: 30px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 16px 40px;
            border: none;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 4px;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            border: 2px solid transparent;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #2563eb 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-violet);
            border: 2px solid var(--primary-violet);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-content {
                padding: 30px 20px;
            }
            
            .category-title {
            background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
            color: white;
            padding: 20px 30px;
            margin: 50px 0 30px;
            font-size: 1.3em;
            font-weight: 700;
            letter-spacing: -0.3px;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

            .question-card {
                padding: 20px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Auto-diagnostic Managérial</h1>
            <p>Évaluez vos pratiques sur 34 dimensions clés et identifiez vos axes de progression prioritaires</p>
            </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">0 / 34 questions répondues</div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="showTab('intro')">Introduction</div>
            <div class="tab" onclick="showTab('questionnaire')">Questionnaire</div>
            <div class="tab" onclick="showTab('results')">Résultats</div>
        </div>

        <!-- ONGLET INTRODUCTION -->
        <div id="intro" class="tab-content active">
            <div class="intro-section">
                <h2>Pourquoi ce diagnostic ?</h2>
                <p>
                    Vous gérez probablement plus d'urgences que de priorités. Vous courez après le temps, 
                    vos collaborateurs n'avancent pas sans vous. Ce questionnaire identifie précisément 
                    où vous en êtes et ce qui doit changer.
                </p>
                <p style="margin-top: 20px;">
                    <strong>34 questions. 8 thématiques. Un diagnostic factuel de vos pratiques managériales.</strong>
                </p>
            </div>

            <div class="intro-section">
                <h2>Comment ça marche ?</h2>
                <ul>
                    <li>Répondez honnêtement aux 34 questions (15-20 minutes)</li>
                    <li>Obtenez vos scores par compétence managériale</li>
                    <li>Identifiez vos priorités de développement</li>
                    <li>Téléchargez votre diagnostic complet</li>
                </ul>
            </div>

            <div class="bareme-section">
                <h2>Barème de notation</h2>
                
                <div class="bareme-card low">
                    <h3>Jamais ou pas du tout (0 point)</h3>
                    <p>Je ne fais jamais ou pas du tout cette pratique.</p>
                </div>

                <div class="bareme-card medium">
                    <h3>Rarement ou partiellement (2 points)</h3>
                    <p>J'essaie de faire cette pratique, mais ce n'est pas régulier ou cela n'est pas complet.</p>
                </div>

                <div class="bareme-card high">
                    <h3>Souvent ou systématiquement (5 points)</h3>
                    <p>Cette pratique fait partie intégrante et régulière de ma gestion quotidienne.</p>
                </div>
            </div>

            <div class="advice-box">
                <h3>Conseils pour répondre</h3>
                <ul>
                    <li>Soyez honnête avec vous-même</li>
                    <li>Évaluez le manager que vous êtes aujourd'hui, pas celui que vous aimeriez être</li>
                    <li>Ne répondez pas quelque chose que vous ne sauriez pas prouver</li>
                    <li>Il n'y a aucun jugement, juste un diagnostic factuel</li>
                </ul>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" onclick="showTab('questionnaire')">
                    Commencer le diagnostic
                </button>
            </div>
        </div>

        <!-- ONGLET QUESTIONNAIRE -->
        <div id="questionnaire" class="tab-content">
            <div id="questionsContainer"></div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showTab('intro')">← Retour</button>
                <button class="btn btn-primary" onclick="calculateResults()">Voir mes résultats</button>
            </div>
        </div>

        <!-- ONGLET RÉSULTATS -->
        <div id="results" class="tab-content">
            <div class="global-score" id="globalScore"></div>
            <div id="resultsContainer"></div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showTab('questionnaire')">← Modifier mes réponses</button>
                <button class="btn btn-primary" onclick="exportResults()">Télécharger le diagnostic</button>
                <a href="URL_DE_TA_PAGE_AUTO_DIAGNOSTIC" target="_parent" class="btn btn-secondary">← Retour</a>
            </div>
        </div>
    </div>

    <script>
        // Données du questionnaire
        const bareme = [
            { label: "Jamais ou pas du tout", points: 0 },
            { label: "Rarement ou partiellement", points: 2 },
            { label: "Souvent ou systématiquement", points: 5 }
        ];

        const questions = [
            { num: "Q1", category: "Organisation Personnelle & Efficience", text: "Je réserve du temps régulier (sans interruption) pour planifier, réfléchir, ou améliorer les méthodes de travail de l'équipe.", formations: ["Manager Efficace", "Organisation Efficace"] },
            { num: "Q2", category: "Organisation Personnelle & Efficience", text: "J'identifie et j'élimine régulièrement les tâches ou les contrôles qui n'apportent plus de valeur ajoutée essentielle (principe Lean).", formations: ["Manager Efficace", "Organisation Efficace", "Résolution Efficace"] },
            { num: "Q3", category: "Organisation Personnelle & Efficience", text: "J'ai une capacité suffisante pour gérer les imprévus et je me sens rarement débordé(e) par les demandes urgentes de mes collaborateurs ou de mon manager.", formations: ["Manager Efficace", "Organisation Efficace"] },
            { num: "Q4", category: "Organisation Personnelle & Efficience", text: "Ma mission (ou celle de mon équipe) est formulée en une phrase simple expliquant clairement sa raison d'être dans l'entreprise.", formations: ["Progression Efficace", "Organisation Efficace"] },
            { num: "Q5", category: "Organisation Personnelle & Efficience", text: "Je vérifie mes indicateurs de performance clés (chiffres ou réalisations) avec une fréquence élevée (au moins une fois par semaine).", formations: ["Progression Efficace", "Pilotage Efficace"] },
            { num: "Q6", category: "Objectifs et priorisation", text: "Je définis un maximum de 5 objectifs clairs et mesurables pour mon équipe sur une période limitée (environ 90 jours).", formations: ["Progression Efficace", "Pilotage Efficace", "Exécution Efficace"] },
            { num: "Q7", category: "Objectifs et priorisation", text: "Je m'assure que chaque objectif fixé pour l'équipe est associé à un système de mesure (un chiffre ou une réalisation concrète).", formations: ["Progression Efficace", "Pilotage Efficace", "Exécution Efficace"] },
            { num: "Q8", category: "Objectifs et priorisation", text: "Je fais une revue hebdomadaire des actions de l'équipe pour m'assurer que chacun sait \"Qui fait Quoi pour Quand\" et pour garantir l'alignement.", formations: ["Pilotage Efficace", "Exécution Efficace", "CDP Efficace"] },
            { num: "Q9", category: "Objectifs et priorisation", text: "Si nous rencontrons des obstacles, je change le plan d'action (le \"comment\") pour 30 jours, mais je maintiens l'objectif initial (le \"quoi\").", formations: ["Pilotage Efficace", "Exécution Efficace"] },
            { num: "Q10", category: "Résolution de Problèmes & Amélioration Continue", text: "Face à un problème récurrent, je mène une enquête structurée pour identifier la cause racine (par exemple, en me posant la question 'pourquoi' plusieurs fois).", formations: ["Décision Efficace", "Résolution Efficace"] },
            { num: "Q11", category: "Résolution de Problèmes & Amélioration Continue", text: "J'anime la résolution de problèmes en utilisant des supports visuels (dessins, graphiques) et des données chiffrées plutôt que des impressions (\"souvent\", \"trop\").", formations: ["Résolution Efficace"] },
            { num: "Q12", category: "Résolution de Problèmes & Amélioration Continue", text: "Quand un collaborateur me présente un problème, mon réflexe est de lui demander de proposer d'abord une solution ou une piste d'action.", formations: ["Décision Efficace", "CDP Efficace"] },
            { num: "Q13", category: "Résolution de Problèmes & Amélioration Continue", text: "Pour prendre une décision importante et complexe, je consulte mes collaborateurs individuellement et par écrit pour recueillir leurs analyses sans les influencer.", formations: ["Décision Efficace"] },
            { num: "Q14", category: "Résolution de Problèmes & Amélioration Continue", text: "Je suis à l'aise avec l'idée d'abandonner rapidement un plan d'action ou un projet qui ne donne pas de résultats ou qui s'enlise, même si j'y ai mis de l'énergie.", formations: ["Décision Efficace", "Résolution Efficace"] },
            { num: "Q15", category: "Relation Collaborateur & Communication", text: "J'organise des rencontres individuelles régulières (au moins une fois toutes les deux semaines) avec chaque membre de mon équipe.", formations: ["Manager Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q16", category: "Relation Collaborateur & Communication", text: "Au début de ces échanges individuels, je laisse la personne parler en premier de ses sujets, sans l'interrompre ni orienter.", formations: ["Manager Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q17", category: "Relation Collaborateur & Communication", text: "J'adapte mon style de communication, mon approche et ma reconnaissance (en public ou en privé) en fonction de chaque personne.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q18", category: "Relation Collaborateur & Communication", text: "Je suis vigilant(e) aux signaux qui indiquent un conflit potentiel (tension relationnelle, difficulté de communication, baisse d'engagement) et j'agis très tôt.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q19", category: "Relation Collaborateur & Communication", text: "Lors d'un projet, je suis attentif à mettre en avant les personnes dont les forces sont les plus adaptées, plutôt que d'attribuer la tâche à la personne disponible.", formations: ["CDP Efficace", "Communication Efficace", "Charisme Efficace"] },
            { num: "Q20", category: "Performance, Feedback & Culture", text: "Je donne immédiatement ou très rapidement un retour d'information précis et factuel à mes collaborateurs lorsqu'ils ont bien ou mal agi.", formations: ["Manager Efficace", "Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q21", category: "Performance, Feedback & Culture", text: "Je note activement les comportements de mes collaborateurs qui renforcent ou nuisent à la cohésion et aux résultats (bonnes ou mauvaises pratiques observables).", formations: ["Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q22", category: "Performance, Feedback & Culture", text: "Lors de l'évaluation, je juge mes collaborateurs sur leurs Résultats ET sur leurs Comportements (Rétrospective + Contribution Culturelle).", formations: ["Manager Efficace", "Culture Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q23", category: "Performance, Feedback & Culture", text: "Je m'assure que mon évaluation et celle de mon collaborateur sont alignées; si un écart existe, nous en discutons clairement en entretien.", formations: ["Manager Efficace", "Entretien Efficace", "Recrutement Efficace"] },
            { num: "Q24", category: "Performance, Feedback & Culture", text: "Je suis convaincu(e) qu'il est impossible de trop communiquer de manière honnête et ouverte sur la performance et les comportements dans mon équipe.", formations: ["Manager Efficace", "Culture Efficace"] },
            { num: "Q25", category: "Délégation, Autonomie & Coaching", text: "Je délègue des tâches complexes ou risquées et je laisse l'autonomie totale à mon collaborateur sur le \"comment\" accomplir la mission.", formations: ["Manager Efficace"] },
            { num: "Q26", category: "Délégation, Autonomie & Coaching", text: "Je ne me laisse pas rendre du travail (\"délégation inversée\") par mes collaborateurs qui me demandent de résoudre leurs problèmes.", formations: ["Manager Efficace"] },
            { num: "Q27", category: "Délégation, Autonomie & Coaching", text: "Je m'appuie sur les forces et les réussites passées de mes collaborateurs pour fixer leurs objectifs et orienter mes feedbacks.", formations: ["Manager Efficace", "Entretien Efficace"] },
            { num: "Q28", category: "Délégation, Autonomie & Coaching", text: "Quand un collaborateur a besoin de se développer, je lui propose des ressources (formation, mentor, lecture) ou je lui donne des opportunités pour apprendre.", formations: ["Manager Efficace", "Entretien Efficace"] },
            { num: "Q29", category: "Délégation, Autonomie & Coaching", text: "Je suis vigilant(e) à ce que les défis que je fixe à mes collaborateurs correspondent à leurs compétences actuelles + 10%, pour éviter la routine ou l'échec.", formations: ["Entretien Efficace"] },
            { num: "Q30", category: "Acquisition & Gestion des Talents", text: "Avant de recruter pour un poste vacant ou nouveau, j'examine systématiquement si les missions peuvent être redistribuées dans l'équipe.", formations: ["Recrutement Efficace"] },
            { num: "Q31", category: "Acquisition & Gestion des Talents", text: "Je rédige la description de poste idéale en listant les comportements observables et les attitudes nécessaires (pas seulement les compétences techniques).", formations: ["Culture Efficace", "Recrutement Efficace"] },
            { num: "Q32", category: "Acquisition & Gestion des Talents", text: "Lors des entretiens, je pose principalement des questions qui demandent au candidat de raconter une situation concrète et passée (questions comportementales).", formations: ["Recrutement Efficace"] },
            { num: "Q33", category: "Acquisition & Gestion des Talents", text: "Je suis en permanence à la recherche de raisons factuelles de ne pas recruter un candidat, même si je l'apprécie personnellement.", formations: ["Recrutement Efficace"] },
            { num: "Q34", category: "Acquisition & Gestion des Talents", text: "Je fais participer plusieurs membres de mon équipe à la phase d'entretien pour obtenir une évaluation multicritères et éviter mes biais personnels.", formations: ["Manager Efficace", "Recrutement Efficace"] }
        ];

        const formations = {
            "Manager Efficace": {
                description: "Le 1-à-1 hebdomadaire, le feedback, la délégation et le coaching. Les quatre outils fondamentaux pour construire une relation de confiance et développer l'autonomie.",
                theme: "CRÉER UN SYSTÈME"
            },
            "Progression Efficace": {
                description: "Définir des objectifs clairs et mesurables, suivre la progression de l'équipe et ajuster les plans d'action pour garantir l'atteinte des résultats.",
                theme: "S'ORGANISER"
            },
            "Organisation Efficace": {
                description: "Récupérer du temps stratégique, éliminer les tâches sans valeur ajoutée et gérer efficacement les imprévus sans être débordé.",
                theme: "S'ORGANISER"
            },
            "Pilotage Efficace": {
                description: "Un système de gestion par objectifs sur 90 jours avec des réunions Stratégiques, Tactiques et de Terrain. Flexible sur le comment, strict sur le quoi.",
                theme: "CRÉER UN SYSTÈME"
            },
            "Décision Efficace": {
                description: "Prendre des décisions éclairées en consultant vos collaborateurs, analyser les problèmes en profondeur et savoir abandonner ce qui ne fonctionne pas.",
                theme: "EXECUTER"
            },
            "Résolution Efficace": {
                description: "Identifier les causes racines des problèmes, utiliser des approches structurées et des données pour résoudre efficacement les difficultés récurrentes.",
                theme: "EXECUTER"
            },
            "Exécution Efficace": {
                description: "Transformer les objectifs en actions concrètes, assurer le suivi régulier et garantir que chacun sait \"Qui fait Quoi pour Quand\".",
                theme: "EXECUTER"
            },
            "CDP Efficace": {
                description: "Chef de projet efficace : adapter votre communication, détecter les tensions, mobiliser les forces de chacun sur les projets.",
                theme: "CRÉER UN SYSTÈME"
            },
            "Communication Efficace": {
                description: "Établir des relations de qualité avec vos collaborateurs, adapter votre style de communication et créer un climat de confiance.",
                theme: "COMMUNIQUER"
            },
            "Charisme Efficace": {
                description: "Développer votre influence et votre leadership, inspirer vos équipes et renforcer votre pouvoir relationnel.",
                theme: "COMMUNIQUER"
            },
            "Culture Efficace": {
                description: "Définir et promouvoir les comportements attendus, évaluer la contribution culturelle de chacun et construire une culture d'équipe forte.",
                theme: "CRÉER UN SYSTÈME"
            },
            "Entretien Efficace": {
                description: "Transformer l'évaluation annuelle en outil de coaching, éviter les biais, structurer vos évaluations basées sur les objectifs et les comportements.",
                theme: "EXECUTER"
            },
            "Recrutement Efficace": {
                description: "Recruter les bons talents en définissant les comportements recherchés, poser les bonnes questions en entretien et éviter les biais de recrutement.",
                theme: "EXECUTER"
            }
        };

        let responses = {};

        // Initialisation
        function init() {
            renderQuestions();
            updateProgress();
        }

        // Afficher les questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            let currentCategory = null;
            let html = '';

            questions.forEach((q, index) => {
                if (q.category !== currentCategory) {
                    currentCategory = q.category;
                    html += `<div class="category-title">${currentCategory}</div>`;
                }

                html += `
                    <div class="question-card">
                        <div class="question-header">
                            <div class="question-number">${q.num.replace('Q', '')}</div>
                            <div class="question-text">${q.text}</div>
                        </div>
                        <div class="options">
                            ${bareme.map((option, optIndex) => `
                                <div class="option" id="option-${index}-${optIndex}" onclick="selectOption('${q.num}', ${option.points}, ${index}, ${optIndex})">
                                    <input type="radio" name="${q.num}" id="${q.num}-${optIndex}" value="${option.points}">
                                    <label for="${q.num}-${optIndex}">
                                        <strong>${option.label}</strong> (${option.points} ${option.points === 1 ? 'point' : 'points'})
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Sélectionner une option
        function selectOption(questionNum, points, questionIndex, optionIndex) {
            responses[questionNum] = points;
            
            // Mettre à jour l'interface
            document.querySelectorAll(`.option[id^="option-${questionIndex}-"]`).forEach(opt => {
                opt.classList.remove('selected');
            });
            document.getElementById(`option-${questionIndex}-${optionIndex}`).classList.add('selected');
            document.getElementById(`${questionNum}-${optionIndex}`).checked = true;
            
            updateProgress();
        }

        // Mettre à jour la barre de progression
        function updateProgress() {
            const answered = Object.keys(responses).length;
            const total = questions.length;
            const percentage = (answered / total) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${answered} / ${total} questions répondues`;
        }

        // Calculer les résultats
        function calculateResults() {
            const answered = Object.keys(responses).length;
            if (answered < questions.length) {
                alert(`Veuillez répondre à toutes les questions (${answered}/${questions.length} répondues)`);
                return;
            }

            // Calculer le score par formation
            const formationScores = {};
            const formationMaxScores = {};

            // Initialiser les compteurs
            Object.keys(formations).forEach(formation => {
                formationScores[formation] = 0;
                formationMaxScores[formation] = 0;
            });

            // Parcourir les questions et calculer les scores
            questions.forEach(q => {
                const score = responses[q.num] || 0;
                q.formations.forEach(formation => {
                    formationScores[formation] += score;
                    formationMaxScores[formation] += 5;
                });
            });

            // Calculer les pourcentages et priorités
            const results = [];
            Object.keys(formations).forEach(formation => {
                const score = formationScores[formation];
                const maxScore = formationMaxScores[formation];
                const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
                
                let priority, priorityClass;
                if (percentage < 25) {
                    priority = "Critique";
                    priorityClass = "critical";
                } else if (percentage < 60) {
                    priority = "Elevée";
                    priorityClass = "high";
                } else if (percentage < 90) {
                    priority = "Amélioration possible";
                    priorityClass = "medium";
                } else {
                    priority = "Compétence établie";
                    priorityClass = "low";
                }

                results.push({
                    formation,
                    score,
                    maxScore,
                    percentage: percentage.toFixed(1),
                    priority,
                    priorityClass,
                    theme: formations[formation].theme,
                    description: formations[formation].description
                });
            });

            // Trier par priorité
            results.sort((a, b) => {
                const priorityOrder = { "Critique": 0, "Elevée": 1, "Amélioration possible": 2, "Compétence établie": 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });

            displayResults(results);
            showTab('results');
        }

        // Afficher les résultats
        function displayResults(results) {
            const totalScore = Object.values(responses).reduce((a, b) => a + b, 0);
            const maxTotalScore = questions.length * 5;
            const globalPercentage = ((totalScore / maxTotalScore) * 100).toFixed(1);

            document.getElementById('globalScore').innerHTML = `
                <h2>Votre Score Global</h2>
                <div class="score">${totalScore}<span style="font-size: 0.5em; opacity: 0.7;"> / ${maxTotalScore}</span></div>
                <div class="percentage">${globalPercentage}% de maîtrise</div>
            `;

            // Grouper par thème
            const byTheme = {};
            results.forEach(r => {
                if (!byTheme[r.theme]) byTheme[r.theme] = [];
                byTheme[r.theme].push(r);
            });

            let html = '';
            Object.keys(byTheme).forEach(theme => {
                html += `
                    <div class="theme-section">
                        <div class="theme-title">${theme}</div>
                        <div class="results-grid">
                            ${byTheme[theme].map(r => `
                                <div class="result-card priority-${r.priorityClass}">
                                    <h3>${r.formation}</h3>
                                    <div class="score-display">${r.percentage}%</div>
                                    <div class="score-detail">${r.score} / ${r.maxScore} points</div>
                                    <div class="priority-badge">${r.priority}</div>
                                    <div class="formation-description">${r.description}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            document.getElementById('resultsContainer').innerHTML = html;
        }

        // Changer d'onglet
        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="showTab('${tabName}')"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');

            // Scroll to top - multiple méthodes pour assurer la compatibilité
            window.scrollTo({ top: 0, behavior: 'smooth' });
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
            
            // Alternative : scroll vers le header
            document.querySelector('.header').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Exporter les résultats
        function exportResults() {
            const totalScore = Object.values(responses).reduce((a, b) => a + b, 0);
            const maxTotalScore = questions.length * 5;
            const globalPercentage = ((totalScore / maxTotalScore) * 100).toFixed(1);

            let text = `AUTO-DIAGNOSTIC MANAGÉRIAL - MEILLEUR MANAGER\n`;
            text += `${'='.repeat(50)}\n\n`;
            text += `Score Global: ${totalScore}/${maxTotalScore} (${globalPercentage}%)\n\n`;

            // Calculer les scores par formation
            const formationScores = {};
            const formationMaxScores = {};
            Object.keys(formations).forEach(formation => {
                formationScores[formation] = 0;
                formationMaxScores[formation] = 0;
            });

            questions.forEach(q => {
                const score = responses[q.num] || 0;
                q.formations.forEach(formation => {
                    formationScores[formation] += score;
                    formationMaxScores[formation] += 5;
                });
            });

            const results = [];
            Object.keys(formations).forEach(formation => {
                const score = formationScores[formation];
                const maxScore = formationMaxScores[formation];
                const percentage = maxScore > 0 ? (score / maxScore) * 100 : 0;
                
                let priority;
                if (percentage < 25) priority = "Critique";
                else if (percentage < 60) priority = "Elevée";
                else if (percentage < 90) priority = "Amélioration possible";
                else priority = "Compétence établie";

                results.push({ formation, score, maxScore, percentage: percentage.toFixed(1), priority, theme: formations[formation].theme });
            });

            results.sort((a, b) => {
                const priorityOrder = { "Critique": 0, "Elevée": 1, "Amélioration possible": 2, "Compétence établie": 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });

            // Grouper par thème
            const byTheme = {};
            results.forEach(r => {
                if (!byTheme[r.theme]) byTheme[r.theme] = [];
                byTheme[r.theme].push(r);
            });

            Object.keys(byTheme).forEach(theme => {
                text += `\n${theme}\n${'-'.repeat(theme.length)}\n`;
                byTheme[theme].forEach(r => {
                    text += `\n${r.formation}\n`;
                    text += `  Score: ${r.score}/${r.maxScore} (${r.percentage}%)\n`;
                    text += `  Priorité: ${r.priority}\n`;
                });
            });

            text += `\n\nDétail des réponses\n${'-'.repeat(20)}\n`;
            questions.forEach(q => {
                const score = responses[q.num] || 0;
                const label = bareme.find(b => b.points === score)?.label || 'Non répondu';
                text += `\n${q.num}: ${label} (${score} points)\n`;
            });

            // Créer et télécharger le fichier
            const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'diagnostic_managerial_meilleurmanager.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Initialiser au chargement
        window.onload = init;
    </script>
</body>
</html>
